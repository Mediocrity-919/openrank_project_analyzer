# GitHub项目深度分析器

- [GitHub项目深度分析器](#github项目深度分析器)
  - [1. 项目概述](#1-项目概述)
  - [2. 功能描述](#2-功能描述)
    - [2.1 数据分析预测](#21-数据分析预测)
    - [2.2 多个项目对比](#22-多个项目对比)
  - [3. 分析过程](#3-分析过程)
    - [3.1 项目分层原理](#31-项目分层原理)
    - [3.2 趋势预测原理](#32-趋势预测原理)
    - [3.3 健康评估原理](#33-健康评估原理)
  - [4. 输出呈现](#4-输出呈现)
  - [5. 注意事项](#5-注意事项)
    - [5.1 内置 Python 运行](#51-内置-python-运行)
    - [5.2 GitHub API 访问限制](#52-github-api-访问限制)

## 1. 项目概述

**GitHub项目深度分析器**是一个用于对GitHub项目进行综合评估和预测的工具，它结合了多种机器学习算法和数据分析技术，提供了项目的**层级分类**、**趋势预测**、**健康评估**等功能。该工具旨在帮助用户更好地了解GitHub项目的发展状况和潜力，为投资决策、社区管理等提供有力支持。

## 2. 功能描述

### 2.1 数据分析预测

**GitHub项目深度分析器**允许您传入**一个或多个Github仓库地址**，根据您的输入自动获取对应仓库的各项指标数据，并对其进行评估分析，以及对其发展趋势做出预测，最终将结果以图表、TXT等格式输出。

- 支持的指标：openrank、activity、stars、attention、participants、contributors等。
- 预测的范围：openrank、stars、attention指标未来6个月的变化趋势。

// TO DO 展示图片

### 2.2 多个项目对比

在**数据分析**功能的基础上，**GitHub项目深度分析器**允许您传入**两个及以上的Github仓库地址**，根据您的输入自动获取对应仓库的各项指标数据，对其进行评估分析后将其与其它项目的各项指标进行对比，最终将结果以图表、TXT等格式输出。

// TO DO 展示图片

## 3. 分析过程

**GitHub项目深度分析器**将通过以下几个步骤对您的项目进行深入分析。

1. **项目分层**：
   基于平均**OpenRank**、**总Stars数**、**最大贡献者数**三个指标，使用GMM模型进行概率化分层，将项目分为**GIANT**、**MATURE**、**GROWING**、**EMERGING**四个层级，从而提供更准确的项目画像。
2. **趋势预测**：
   基于**简化版Prophet算法**，结合多种预测方法的加权组合对项目进行预测，提供6个月的趋势预测和置信区间。
3. **健康评估**：
   使用**AHP层次分析法**，从**动量**、**稳定性**、**潜力**、**安全性**4个维度进行分析，并根据项目层级动态调整权重，提供更精准的健康评分。

### 3.1 项目分层原理

分层模型采用**高斯混合模型（GMM）**，通过对项目的历史数据进行聚类分析，将项目划分为不同的层级类别。具体原理如下：

- 分层指标
    GMM分层基于以下三个核心指标：
    1. **平均OpenRank**：项目在分析期间的平均OpenRank值
    2. **总Stars数**：项目获得的总Stars数量
    3. **最大贡献者数**：项目在分析期间的最大贡献者数量
- 层级类别
    项目分析器会把项目分为四个层级：

    | 层级 | 名称 | 描述 | 基准值 |
    | ---- | ---- | ---- | ------ |
    | GIANT | 巨型项目 | 具有极高影响力的大型项目 | OpenRank≥80，Stars≥50000，参与者≥500 |
    | MATURE | 成熟项目 | 发展稳定的成熟项目 | OpenRank≥25，Stars≥5000，参与者≥100 |
    | GROWING | 成长项目 | 快速发展的成长型项目 | OpenRank≥8，Stars≥1000，参与者≥30 |
    | EMERGING | 新兴项目 | 刚刚起步的新兴项目 | OpenRank≥2，Stars≥100，参与者≥5 |

- 概率计算
  对于每个项目，GMM模型会计算其属于四个层级的概率分布：

  1. 将项目的三个指标值标准化
  2. 使用GMM模型的概率密度函数计算项目属于每个组件的概率
  3. 将GMM组件映射到层级标签（按OpenRank中心点排序）
  4. 确定主要层级和置信度（最大概率值）

### 3.2 趋势预测原理

- 预测流程
  1. **数据验证**：检查数据质量和长度，至少需要6个月的数据
  2. **多方法预测**：使用三种预测方法分别进行预测
  3. **加权组合**：按照预设权重组合三种预测结果
  4. **置信区间计算**：基于历史数据的波动性计算预测置信区间
  5. **置信度评估**：基于历史数据的波动性评估预测置信度
  6. **结果输出**：返回预测值、置信区间、置信度等结果
- 预测方法
    项目分析器结合了三种不同的预测方法，通过加权组合得到最终的预测结果：

    | 预测方法 | 权重 | 适用场景 | 实现原理 |
    | ------- | ---- | ------- | ------- |
    | 线性回归 | 0.4 | 趋势稳定的数据 | 基于最小二乘法拟合线性模型 |
    | 指数回归 | 0.3 | 指数增长或衰减的数据 | 对数据取对数后进行线性回归，再转换回指数形式 |
    | 加权移动平均 | 0.3 | 短期预测，近期数据更重要 | 近期数据权重更高，计算加权平均值 |

### 3.3 健康评估原理

## 4. 输出呈现

## 5. 注意事项

### 5.1 内置 Python 运行

为方便在未安装系统 Python 的环境运行，本项目提供自动引导的便携式 Python 运行：

- 首次运行时，双击或在终端执行 `run.bat`，脚本会自动下载并解压 Windows 官方**嵌入式 Python**到 `python_runtime/`，并安装项目依赖（可能耗时较长）。
- 后端服务通过环境变量 `PYTHON_PATH` 指向内置解释器，无需系统级 Python。

**注意事项：**

- 依赖中包含 `prophet`，在 Windows 上安装可能较慢或需要额外的构建工具；如遇安装困难，可先移除 `requirements.txt` 中的 `prophet`，功能会有部分受限。

**手动初始化：**：（可选，因为直接运行 `run.bat` 会自动初始化）

- 命令行执行以下命令自动安装便携式 Python 与依赖。
  
  ```powershell
    PowerShell -ExecutionPolicy Bypass -File .\scripts\setup_python_runtime.ps1
  ```

- 然后运行 `run.bat` 启动服务即可。

### 5.2 GitHub API 访问限制

由于 GitHub 对未认证的 API 访问有较低的速率限制（每小时60次请求），建议在高频使用场景下配置 GitHub 个人访问令牌（PAT）以提升访问速率。

1. 生成 TOKEN：登录 GitHub 账号，访问[Settings/Developer Settings/Personal access tokens](https://github.com/settings/tokens)，生成一个新的`Personal access tokens (classic)`，勾选所需权限（通常只需 `repo` 权限）。
2. 复制生成的 TOKEN，妥善保存。（这些TOKEN只在生成时可见，如果没复制就彻底没了）
3. 配置 TOKEN：（任选其一）
  在环境变量中添加 `GITHUB_TOKEN`，值为刚刚复制的个人访问令牌。
  在本项目的根目录中新建 `.env` 文件，并添加：`GITHUB_TOKEN=你的个人访问令牌`。
